**ElasticSearch 问题整理**

``1. ES是什么？ 为什么要用到ES？``

​	我们平时用到的mysql、oracle等关系型的数据库涉及到IO读取，这时性能会与操作系统每页读取的大小有关，比如当每页读取的大小	为16KB时，在文本越大的情况下，读取的性能是越差的。而ES恰好就是处理这种大文本的检索。它的底层使用倒排索引把大文本进行  	处理后再进行检索，比mysql的检索效率要快的多。



``2. 使用的ES集群架构，索引的数据大小、分片有多少、一些调优的手段？``

​	**``分片的概念：``** 分片就是数据的容器，数据的载体。数据存储在分片上，分片又被分配到集群中的节点上，当集群扩大或缩小时，ES会自动在节点间迁	移分片，使得集群保持平衡。

​	**``副本``**: 分片的复制



``3. 分片的创建策略、感知策略``

​	要考虑分片大小、集群的大小、堆内存大小、重负载

​	如何使得主分片和副本分别分布在某一个固定的节点？

​	（1）首先区分节点，这里用node.attr.rack_id来区分存放副本的节点

​		![image-20220705190132705](C:\Users\tracy\AppData\Roaming\Typora\typora-user-images\image-20220705190132705.png)

​	（2）主节点感知路由设置副本存放的位置

​	`	PUT _cluster/settings
​	{
​	  "transient": {
​	    "cluster.routing.allocation.awareness.attributes": "rack_id"
​	  }
​	}`

​	这里设置的时候出现了UNSIGN的情况，这里可以根据`GET _cluster/allocation/explain`获取未分配的原因

1. 掩饰等待
2. 副本和主分片不能同时

​	我这次是删除了副本，然后再重新设置副本的个数就ok了



``4. ES的容灾：ES是如何做到高可用的``

​	(1) 解决数据一致性的问题

​		



``4. ES的读取速度优化``





``5. ES的主节点选举机制``







